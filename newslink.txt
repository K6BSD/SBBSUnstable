Synchronet NewsLink Installation/Configuration
==============================================

$Id$

Background
----------
NewsLink is an external module written in JavaScript for Synchronet v3.1+.
It is used to link one or more Synchronet sub-boards with one or more
USENET (or other NNTP network) newsgroups on one or more news servers.

The source code for NewsLink (if you're interested) is contained in the
files newslink.js and newsutil.js in the Synchronet EXEC directory.


Step-by-Step Installation/Configuration
---------------------------------------

If you have installed Synchronet v3.10 or v3.11 from scratch (not an upgrade
from an earlier version), then some of the following steps may have already
been completed for you.


1. Go into SCFG->External Programs->Timed Events and created a timed event
   for NewsLink (if one doesn't already exist). Example:

   [NEWSLINK Timed Event]
    1: Internal Code                   NEWSLINK
    2: Start-up Directory
    3: Command Line                    ?newslink
    4: Enabled                         Yes
    5: Execution Node                  1
    6: Execution Days of Month         Any
    7: Execution Days of Week          All
    8: Execution Frequency             48 times a day
    9: Requires Exclusive Execution    No
   10: Force Users Off-line For Event  No
   11: Native (32-bit) Executable      No
   12: Use Shell to Execute            No
   13: Background Execution            No
   14: Always Run After Init/Re-init   No

   You may change the Execution Frequency to suit your needs.

2. Go into SCFG->Message Areas and create a new Message Group for your USENET
   messsage areas. Example:

   [USENET Group]
   1: Long Name                  USENET Newsgroups
   2: Short Name                 USENET
   3: Internal Code Prefix       USENET_
   4: Access Requirements

3. Now go into SCFG->Message Areas->USENET->Sub-boards and create some
   sub-boards to link to USENET newsgroups. Example:

   [alt.bbs.allsysop Sub-board]
    1: Long Name                  alt.bbs.allsysop
    2: Short Name                 alt.bbs.allsysop
    3: QWK Name                   allsysop
    4: Internal Code              USENET_ALLSYSOP
    5: Newsgroup Name             alt.bbs.allsysop
    6: Access Requirements
    7: Reading Requirements
    8: Posting Requirements       REST NOT G
    9: Operator Requirements
   10: Moderated Posting User
   11: Maximum Messages           5000
   12: Purge by Age               Disabled
   13: Duplicate Checking         Enabled (10000 message CRCs)

4. For each USENET sub-board, set Network Options->Internet (UUCP/NNTP) to 
   "Yes".

5. Edit your ctrl/newslink.cfg file:

   A. Change the "SERVER" line to specify the host name or IP address of the
      USENET news server you are linking with.
   B. Change the "USER" and "PASS" lines to specify the username and password
      you must use to login to the above USENET news server.
   C. For each USENET sub-board you configured in step 3, add an "AREA" line,
      specifying each sub-board's "Internal Code". Example:
      AREA USENET_ALLSYSOP
   D. OPTIONAL: If you wish to download all existing newsgroup articles on
      the news server (rather than just the newly-posted articles) for all the
      linked newsgroups, add the line "FLAGS I".
      WARNING: Using this feature may cause the initial newslink execution
      to take a long time to download all the existing articles (potentially
      many thousands) that may be stored on the news server.
   E. Remove or comment-out the "DISABLED" line.

6. Now you may force the NEWSLINK timed event to run. In SBBSCTRL (Win32 GUI),
   you can do this by clicking BBS->Force Timed Event->NEWSLINK, or for the
   console or NT services versions of Synchronet, you can touch or create the
   file data/newslink.now to force the event to run. 

7. Watch your events log for the newslink execution progress and details.


Area Flags
----------
Each "AREA" line in the NewsLink configuration file can specify one or more
"flag characters" to enable special behaviors. These same flag characters may
be specified globally (for all linked areas) using the "FLAGS" line.

The supported flags characters are:

x	do not add tearlines & taglines to exported messages
n	do not add "From Newsgroup" text to imported messages
t	do not add tearline to imported messages
a	convert extended-ASCII chars to ASCII on imported messages
r	remove "Newsgroups:" header field from imported messages
b       decode binary attachments
i	import all articles on first run (not just new articles)
s	no subject filtering (do not check against text/subject.can)

To specify one or more flag characters for a specific area, you must use the
following "AREA" line syntax:

	AREA <sub-code> <newsgroup> <flags> [attachment_dir]

where:

	<sub-code> is the sub-board's complete internal code (including the
	group's code prefix, if there is one).

	<newsgroup> is the name of the newsgroup as it is represented on the
	news server. If this field is missing or is less than 2 characters in
	length, the newsgroup name from SCFG is used.

	<flags> is the optional list of flag characters.

	[attachment_dir] is the optional destination directory for decoded
	binary file attachments (only used with the 'b' flag)


Multiple Servers/Config Files
-----------------------------
ctrl/newslink.cfg is just the default NewsLink configuration file name. If you
specify the path to a different file on the "?newslink" command-line, NewsLink
will use that configuration file instead. This allows you to have multiple
NewsLink timed events configured with different configurations for different
news servers.


Command-line Options
--------------------
Other supported NewsLink command-line options:

-d	enable debug output
-ri	reset import pointers (import all)
-ui	update import pointers (import none)
-re	reset export pointers (export all)
-ue	update export pointers (export none)
-ne	no e-mail addresses
-nm	no mangling of e-mail addresses (disable anti-SPAM measures)
-ix [n]	import a fixed number (n) of articles/messages (default is 500)


JSexec
------
With Synchronet v3.11, it is also possible to run NewsLink externally from
Synchronet (or as a background timed event) by using JSexec.

/* End of file */